{"version":3,"sources":["components/NavBar.js","components/Info.js","util/resizer.js","components/ImageUploader.js","components/Explanation.js","App.js","index.js"],"names":["NavBar","react_default","a","createElement","className","href","type","data-toggle","data-target","aria-controls","aria-expanded","aria-label","id","target","rel","Info","Resizer","height","maxHeight","width","maxWidth","Math","round","image","compressFormat","arguments","length","undefined","quality","rotation","qualityDecimal","canvas","document","newHeightWidth","this","changeHeightWidth","ctx","getContext","rotate","PI","translate","drawImage","toDataURL","concat","b64Data","contentType","byteCharacters","atob","toString","replace","byteArrays","offset","slice","byteNumbers","Array","i","charCodeAt","byteArray","Uint8Array","push","Blob","file","responseUriFunc","outputType","blob","reader","FileReader","readAsDataURL","onload","Image","loadImage","parseMetaData","data","orientation","exif","get","base64data","src","TypeError","fixImage","resizedDataUrl","resizeAndRotateImage","b64toBlob","onerror","error","resizer","createResizedImage","ImageUploader","props","_this","Object","classCallCheck","possibleConstructorReturn","getPrototypeOf","call","state","isLoading","result","errorOccurred","errorMessage","onFormSubmit","bind","assertThisInitialized","onChange","e","_this2","preventDefault","FormData","append","setState","axios","method","url","timeout","headers","Content-Type","then","response","catch","code","console","log","_this3","files","uri","strImage","value","spinner","role","selectedImage","Fragment","alt","showSpinnerOrResults","onSubmit","title","name","disabled","htmlFor","React","Component","Explanation","App","components_ImageUploader","ReactDOM","render","src_App","getElementById"],"mappings":"oMAEe,SAASA,IACtB,OACEC,EAAAC,EAAAC,cAAA,OAAKC,UAAU,+CACbH,EAAAC,EAAAC,cAAA,QAAMC,UAAU,eAAeC,KAAK,KAApC,gCAGAJ,EAAAC,EAAAC,cAAA,UACEC,UAAU,iBACVE,KAAK,SACLC,cAAY,WACZC,cAAY,0BACZC,gBAAc,yBACdC,gBAAc,QACdC,aAAW,qBAEXV,EAAAC,EAAAC,cAAA,QAAMC,UAAU,yBAGlBH,EAAAC,EAAAC,cAAA,OAAKC,UAAU,2BAA2BQ,GAAG,0BAC3CX,EAAAC,EAAAC,cAAA,MAAIC,UAAU,sBACZH,EAAAC,EAAAC,cAAA,MAAIC,UAAU,mBACZH,EAAAC,EAAAC,cAAA,KACEC,UAAU,WACVC,KAAK,yDACLQ,OAAO,SACPC,IAAI,uBAJN,SASFb,EAAAC,EAAAC,cAAA,MAAIC,UAAU,mBACZH,EAAAC,EAAAC,cAAA,KACEC,UAAU,WACVC,KAAK,uDACLQ,OAAO,SACPC,IAAI,uBAJN,eC/BG,SAASC,IACtB,OACEd,EAAAC,EAAAC,cAAA,OAAKC,UAAU,wBACbH,EAAAC,EAAAC,cAAA,MAAIC,UAAU,QAAd,gDACAH,EAAAC,EAAAC,cAAA,2LCkCAa,iHACqBC,EAAQC,EAAWC,EAAOC,GASjD,OARID,EAAQC,IACVH,EAASI,KAAKC,MAAOL,EAASG,EAAYD,GAC1CA,EAAQC,GAENH,EAASC,IACXC,EAAQE,KAAKC,MAAOH,EAAQD,EAAaD,GACzCA,EAASC,GAEJ,CAAED,SAAQE,sDAGSI,EAAOL,EAAWE,GAAgE,IAAtDI,EAAsDC,UAAAC,OAAA,QAAAC,IAAAF,UAAA,GAAAA,UAAA,GAArC,OAAQG,EAA6BH,UAAAC,OAAA,QAAAC,IAAAF,UAAA,GAAAA,UAAA,GAAnB,IAAKI,EAAcJ,UAAAC,OAAA,QAAAC,IAAAF,UAAA,GAAAA,UAAA,GAAH,EAErGK,EAAiBF,EAAU,IAC3BG,EAASC,SAAS7B,cAAc,UAEhCgB,EAAQI,EAAMJ,MACdF,EAASM,EAAMN,OAEfgB,EAAiBC,KAAKC,kBAAkBlB,EAAQC,EAAWC,EAAOC,GACrD,KAAbS,GAAgC,MAAbA,GACrBE,EAAOZ,MAAQc,EAAehB,OAC9Bc,EAAOd,OAASgB,EAAed,QAE/BY,EAAOZ,MAAQc,EAAed,MAC9BY,EAAOd,OAASgB,EAAehB,QAGjCE,EAAQc,EAAed,MACvBF,EAASgB,EAAehB,OAExB,IAAImB,EAAML,EAAOM,WAAW,MAgB5B,OAdIR,IACFO,EAAIE,OAAQT,EAAWR,KAAKkB,GAAM,KACjB,KAAbV,EACFO,EAAII,UAAU,GAAIT,EAAOZ,OACH,MAAbU,EACTO,EAAII,WAAWT,EAAOZ,OAAQY,EAAOd,QACf,MAAbY,EACTO,EAAII,WAAWT,EAAOd,OAAQ,GACR,IAAbY,GAA+B,MAAbA,GAC3BO,EAAII,UAAU,EAAG,IAGrBJ,EAAIK,UAAUlB,EAAO,EAAG,EAAGJ,EAAOF,GAE3Bc,EAAOW,UAAP,SAAAC,OAA0BnB,GAAkBM,qCAGpCc,EAASC,GACxBA,EAAcA,GAAe,aAM7B,IALA,IAEIC,EAAiBC,KAAKH,EAAQI,WAAWC,QAAQ,sCAAuC,KACxFC,EAAa,GAERC,EAAS,EAAGA,EAASL,EAAepB,OAAQyB,GALrC,IAK0D,CAIxE,IAHA,IAAIC,EAAQN,EAAeM,MAAMD,EAAQA,EAN3B,KAQVE,EAAc,IAAIC,MAAMF,EAAM1B,QACzB6B,EAAI,EAAGA,EAAIH,EAAM1B,OAAQ6B,IAChCF,EAAYE,GAAKH,EAAMI,WAAWD,GAGpC,IAAIE,EAAY,IAAIC,WAAWL,GAE/BH,EAAWS,KAAKF,GAIlB,OADW,IAAIG,KAAKV,EAAY,CAAE5C,KAAMuC,+CAKxCgB,EACAzC,EACAF,EACAM,EACAI,EACAC,EACAiC,GAEA,IADAC,EACAtC,UAAAC,OAAA,QAAAC,IAAAF,UAAA,GAAAA,UAAA,GADa,SAETuC,EAAO,KACLC,EAAS,IAAIC,WACfL,GACFI,EAAOE,cAAcN,GACrBI,EAAOG,OAAS,WACd,IAAI7C,EAAQ,IAAI8C,OAvHxB,SAAkBR,EAAMtC,EAAOuC,GAC7BQ,IAAUC,cAAcV,EAAM,SAASW,GAErC,IAAIC,EAAc,EAEdD,EAAKE,OACPD,EAAcD,EAAKE,KAAKC,IAAI,gBAE9BL,IACET,EACA,SAAS9B,GAEP,IACE,IAAI6C,EAAa7C,EAAOW,UAAU,cAClCnB,EAAMsD,IAAMD,EACZ,MAAOE,GACPhB,EAAgB,WAGpB,CAEE/B,QAAQ,EACR0C,YAAaA,MAkGbM,CAASlB,EAAMtC,EAAOuC,GACtBvC,EAAM6C,OAAS,WACb,IAAIY,EAAiBhE,EAAQiE,qBAC3B1D,EACAH,EACAF,EACAM,EACAI,EACAC,GAEFmC,EAAOhD,EAAQkE,UAAUF,EAAlB,SAAArC,OAA2CnB,IAC1BsC,EAAT,SAAfC,EAAwCC,EAAwBgB,KAGpEf,EAAOkB,QAAU,SAAAC,GACftB,EAAgB,WAGlBA,EAAgB,2BAIPuB,EACK,SAACxB,EAAMzC,EAAUF,EAAWM,EAAgBI,EAASC,EAAUiC,EAAiBC,GAChG,OAAO/C,EAAQsE,mBACbzB,EACAzC,EACAF,EACAM,EACAI,EACAC,EACAiC,EACAC,qBCxBSwB,cArIb,SAAAA,EAAYC,GAAO,IAAAC,EAAA,OAAAC,OAAAC,EAAA,EAAAD,CAAAxD,KAAAqD,IACjBE,EAAAC,OAAAE,EAAA,EAAAF,CAAAxD,KAAAwD,OAAAG,EAAA,EAAAH,CAAAH,GAAAO,KAAA5D,KAAMsD,KACDO,MAAQ,CACXlC,KAAM,KACNmC,WAAW,EACXC,OAAQ,KACRC,eAAe,EACfC,aAAc,MAEhBV,EAAKW,aAAeX,EAAKW,aAAaC,KAAlBX,OAAAY,EAAA,EAAAZ,CAAAD,IACpBA,EAAKc,SAAWd,EAAKc,SAASF,KAAdX,OAAAY,EAAA,EAAAZ,CAAAD,IAVCA,4EAcNe,GAAG,IAAAC,EAAAvE,KACdsE,EAAEE,kBACe,IAAIC,UACZC,OAAO,UAAW1E,KAAK6D,MAAMlC,MACtC3B,KAAK2E,SAAS,CAAEb,WAAW,EAAMnC,KAAM,OAEvCiD,IAAM,CACJC,OAAQ,OACRC,IAzBS,2DA0BTC,QAAS,IACTC,QAAS,CACPC,eAAgB,cAElB3C,KAAMtC,KAAK6D,MAAMlC,OAEhBuD,KAAK,SAAAC,GACJZ,EAAKI,SAAS,CAAEZ,OAAQoB,EAAS7C,OACjCiC,EAAKI,SAAS,CAAEb,WAAW,MAE5BsB,MAAM,SAAAlC,GACc,iBAAfA,EAAMmC,KACRd,EAAKI,SAAS,CAAEX,eAAe,EAAMC,aAAc,mCAAoCH,WAAW,KAElGwB,QAAQC,IAAI,mBAAoBrC,GAChCqB,EAAKI,SAAS,CAAEX,eAAe,EAAMC,aAAc,qCAAsCH,WAAW,wCAMnGQ,GAAG,IAAAkB,EAAAxF,KACVA,KAAK2E,SAAS,CAAEZ,OAAQ,KAAMpC,KAAM,KAAMqC,eAAe,EAAOC,aAAc,OAE9EnF,EACEwF,EAAE3F,OAAO8G,MAAM,GACf,IACA,IACA,OACA,GACA,EACA,SAAAC,GACE,GAAY,UAARA,EACFF,EAAKb,SAAS,CACZhD,KAAM,KACNqC,eAAe,EACfC,aAAc,oEAEX,GAAY,mBAARyB,EACTF,EAAKb,SAAS,CAAEhD,KAAM,WACjB,CACL,IAAMgE,EAAWD,EAAI3E,QAAQ,8BAA+B,IAC5DyE,EAAKb,SAAS,CAAEhD,KAAMgE,MAG1B,UAEFrB,EAAE3F,OAAOiH,MAAQ,sCAIjB,IAAMC,EACJ9H,EAAAC,EAAAC,cAAA,OAAKC,UAAU,iBAAiB4H,KAAK,UACnC/H,EAAAC,EAAAC,cAAA,QAAMC,UAAU,WAAhB,eAIE6H,EAAgB/F,KAAK6D,MAAMlC,KAC/B5D,EAAAC,EAAAC,cAACF,EAAAC,EAAMgI,SAAP,KACEjI,EAAAC,EAAAC,cAAA,MAAIC,UAAU,eAAd,kBACAH,EAAAC,EAAAC,cAAA,OAAK0E,IAAK,yBAA2B3C,KAAK6D,MAAMlC,KAAMsE,IAAI,iBAAiB/H,UAAU,eAErF,KAEE6F,EAAS/D,KAAK6D,MAAME,OACxBhG,EAAAC,EAAAC,cAACF,EAAAC,EAAMgI,SAAP,KACEjI,EAAAC,EAAAC,cAAA,MAAIC,UAAU,eAAd,UACAH,EAAAC,EAAAC,cAAA,OAAK0E,IAAK,yBAA2B3C,KAAK6D,MAAME,OAAQkC,IAAI,iBAAiB/H,UAAU,eAEvF,KAEE+F,EAAelG,EAAAC,EAAAC,cAAA,UAAK+B,KAAK6D,MAAMI,cAE/BiC,EAAuBlG,KAAK6D,MAAMC,UAAY+B,EAAU9B,EAE9D,OACEhG,EAAAC,EAAAC,cAAA,OAAKC,UAAU,oCACbH,EAAAC,EAAAC,cAAA,QAAMkI,SAAUnG,KAAKkE,cACnBnG,EAAAC,EAAAC,cAAA,OAAKC,UAAU,eACbH,EAAAC,EAAAC,cAAA,OAAKC,UAAU,eACbH,EAAAC,EAAAC,cAAA,SACEmI,MAAOpG,KAAK6D,MAAMlC,KAAO,cAAgB,cACzCvD,KAAK,OACLF,UAAU,oBACVQ,GAAG,mBACH2H,KAAK,UACLhC,SAAUrE,KAAKqE,SACfiC,SAAUtG,KAAK6D,MAAMC,YAEvB/F,EAAAC,EAAAC,cAAA,SAAOC,UAAU,8BAA8BqI,QAAQ,oBACpDvG,KAAK6D,MAAMlC,KAAO,iBAAmB,iBAG1C5D,EAAAC,EAAAC,cAAA,OAAKC,UAAU,sBACbH,EAAAC,EAAAC,cAAA,UAAQC,UAAU,4BAA4BE,KAAK,SAASkI,UAAWtG,KAAK6D,MAAMlC,MAAlF,eAMN5D,EAAAC,EAAAC,cAAA,OAAKC,UAAU,wBACZ8B,KAAK6D,MAAMG,eAAiBhE,KAAK6D,MAAMI,aAAeA,EAAe,KACrE8B,EACAG,WA/HiBM,IAAMC,WCJnB,SAASC,IACtB,OACE3I,EAAAC,EAAAC,cAAA,OAAKC,UAAU,wBACbH,EAAAC,EAAAC,cAAA,yGACgG,IAC9FF,EAAAC,EAAAC,cAAA,KACEE,KAAK,uEACLQ,OAAO,SACPC,IAAI,uBAHN,gDAMK,IARP,0HAYAb,EAAAC,EAAAC,cAAA,qICGS0I,MAbf,WACE,OACE5I,EAAAC,EAAAC,cAACF,EAAAC,EAAMgI,SAAP,KACEjI,EAAAC,EAAAC,cAACH,EAAD,MACAC,EAAAC,EAAAC,cAAA,OAAKC,UAAU,aACbH,EAAAC,EAAAC,cAACY,EAAD,MACAd,EAAAC,EAAAC,cAAC2I,EAAD,MACA7I,EAAAC,EAAAC,cAACyI,EAAD,qBCLRG,IAASC,OAAO/I,EAAAC,EAAAC,cAAC8I,EAAD,MAASjH,SAASkH,eAAe","file":"static/js/main.5bbfc1f2.chunk.js","sourcesContent":["import React from \"react\";\r\n\r\nexport default function NavBar() {\r\n  return (\r\n    <nav className=\"navbar navbar-expand-lg navbar-dark bg-dark\">\r\n      <span className=\"navbar-brand\" href=\"#\">\r\n        Image Based Gender Predictor\r\n      </span>\r\n      <button\r\n        className=\"navbar-toggler\"\r\n        type=\"button\"\r\n        data-toggle=\"collapse\"\r\n        data-target=\"#navbarSupportedContent\"\r\n        aria-controls=\"navbarSupportedContent\"\r\n        aria-expanded=\"false\"\r\n        aria-label=\"Toggle navigation\"\r\n      >\r\n        <span className=\"navbar-toggler-icon\" />\r\n      </button>\r\n\r\n      <div className=\"collapse navbar-collapse\" id=\"navbarSupportedContent\">\r\n        <ul className=\"navbar-nav mr-auto\">\r\n          <li className=\"nav-item active\">\r\n            <a\r\n              className=\"nav-link\"\r\n              href=\"https://github.com/savithcj/ImageBasedGenderPrediction\"\r\n              target=\"_blank\"\r\n              rel=\"noopener noreferrer\"\r\n            >\r\n              Repo\r\n            </a>\r\n          </li>\r\n          <li className=\"nav-item active\">\r\n            <a\r\n              className=\"nav-link\"\r\n              href=\"https://data.vision.ee.ethz.ch/cvl/rrothe/imdb-wiki/\"\r\n              target=\"_blank\"\r\n              rel=\"noopener noreferrer\"\r\n            >\r\n              Dataset\r\n            </a>\r\n          </li>\r\n        </ul>\r\n      </div>\r\n    </nav>\r\n  );\r\n}\r\n","import React from \"react\";\r\n\r\nexport default function Info() {\r\n  return (\r\n    <div className=\"container-fluid my-4\">\r\n      <h4 className=\"my-4\">Upload an image and get a gender prediction.</h4>\r\n      <p>This is a demo for a Convolutional Neural Network (CNN) model trained with the IMDB face images dataset.</p>\r\n    </div>\r\n  );\r\n}\r\n","/**\r\n * taken from: https://github.com/onurzorluer/react-image-file-resizer\r\n *\r\n * created by:\r\n * @author Onur Zorluer.\r\n *\r\n * modified by:\r\n * Savith Jayasekera\r\n *\r\n */\r\nimport loadImage from \"blueimp-load-image\";\r\n\r\nfunction fixImage(file, image, responseUriFunc) {\r\n  loadImage.parseMetaData(file, function(data) {\r\n    //default image orientation\r\n    var orientation = 0;\r\n    //if exif data available, update orientation\r\n    if (data.exif) {\r\n      orientation = data.exif.get(\"Orientation\");\r\n    }\r\n    loadImage(\r\n      file,\r\n      function(canvas) {\r\n        //here's the base64 data result\r\n        try {\r\n          var base64data = canvas.toDataURL(\"image/jpeg\");\r\n          image.src = base64data;\r\n        } catch (TypeError) {\r\n          responseUriFunc(\"error\");\r\n        }\r\n      },\r\n      {\r\n        //should be set to canvas : true to activate auto fix orientation\r\n        canvas: true,\r\n        orientation: orientation\r\n      }\r\n    );\r\n  });\r\n}\r\n\r\nclass Resizer {\r\n  static changeHeightWidth(height, maxHeight, width, maxWidth) {\r\n    if (width > maxWidth) {\r\n      height = Math.round((height * maxWidth) / width);\r\n      width = maxWidth;\r\n    }\r\n    if (height > maxHeight) {\r\n      width = Math.round((width * maxHeight) / height);\r\n      height = maxHeight;\r\n    }\r\n    return { height, width };\r\n  }\r\n\r\n  static resizeAndRotateImage(image, maxHeight, maxWidth, compressFormat = \"jpeg\", quality = 100, rotation = 0) {\r\n    //image is already when it gets to here\r\n    var qualityDecimal = quality / 100;\r\n    var canvas = document.createElement(\"canvas\");\r\n\r\n    var width = image.width;\r\n    var height = image.height;\r\n\r\n    var newHeightWidth = this.changeHeightWidth(height, maxHeight, width, maxWidth);\r\n    if (rotation === 90 || rotation === 270) {\r\n      canvas.width = newHeightWidth.height;\r\n      canvas.height = newHeightWidth.width;\r\n    } else {\r\n      canvas.width = newHeightWidth.width;\r\n      canvas.height = newHeightWidth.height;\r\n    }\r\n\r\n    width = newHeightWidth.width;\r\n    height = newHeightWidth.height;\r\n\r\n    var ctx = canvas.getContext(\"2d\");\r\n\r\n    if (rotation) {\r\n      ctx.rotate((rotation * Math.PI) / 180);\r\n      if (rotation === 90) {\r\n        ctx.translate(0, -canvas.width);\r\n      } else if (rotation === 180) {\r\n        ctx.translate(-canvas.width, -canvas.height);\r\n      } else if (rotation === 270) {\r\n        ctx.translate(-canvas.height, 0);\r\n      } else if (rotation === 0 || rotation === 360) {\r\n        ctx.translate(0, 0);\r\n      }\r\n    }\r\n    ctx.drawImage(image, 0, 0, width, height);\r\n\r\n    return canvas.toDataURL(`image/${compressFormat}`, qualityDecimal);\r\n  }\r\n\r\n  static b64toBlob(b64Data, contentType) {\r\n    contentType = contentType || \"image/jpeg\";\r\n    var sliceSize = 512;\r\n\r\n    var byteCharacters = atob(b64Data.toString().replace(/^data:image\\/(png|jpeg|jpg);base64,/, \"\"));\r\n    var byteArrays = [];\r\n\r\n    for (var offset = 0; offset < byteCharacters.length; offset += sliceSize) {\r\n      var slice = byteCharacters.slice(offset, offset + sliceSize);\r\n\r\n      var byteNumbers = new Array(slice.length);\r\n      for (var i = 0; i < slice.length; i++) {\r\n        byteNumbers[i] = slice.charCodeAt(i);\r\n      }\r\n\r\n      var byteArray = new Uint8Array(byteNumbers);\r\n\r\n      byteArrays.push(byteArray);\r\n    }\r\n\r\n    var blob = new Blob(byteArrays, { type: contentType });\r\n    return blob;\r\n  }\r\n\r\n  static createResizedImage(\r\n    file,\r\n    maxWidth,\r\n    maxHeight,\r\n    compressFormat,\r\n    quality,\r\n    rotation,\r\n    responseUriFunc,\r\n    outputType = \"base64\"\r\n  ) {\r\n    var blob = null;\r\n    const reader = new FileReader();\r\n    if (file) {\r\n      reader.readAsDataURL(file);\r\n      reader.onload = () => {\r\n        var image = new Image();\r\n        fixImage(file, image, responseUriFunc);\r\n        image.onload = function() {\r\n          var resizedDataUrl = Resizer.resizeAndRotateImage(\r\n            image,\r\n            maxWidth,\r\n            maxHeight,\r\n            compressFormat,\r\n            quality,\r\n            rotation\r\n          );\r\n          blob = Resizer.b64toBlob(resizedDataUrl, `image/${compressFormat}`);\r\n          outputType === \"blob\" ? responseUriFunc(blob) : responseUriFunc(resizedDataUrl);\r\n        };\r\n      };\r\n      reader.onerror = error => {\r\n        responseUriFunc(\"error\");\r\n      };\r\n    } else {\r\n      responseUriFunc(\"File Not Found\");\r\n    }\r\n  }\r\n}\r\nexport default {\r\n  imageFileResizer: (file, maxWidth, maxHeight, compressFormat, quality, rotation, responseUriFunc, outputType) => {\r\n    return Resizer.createResizedImage(\r\n      file,\r\n      maxWidth,\r\n      maxHeight,\r\n      compressFormat,\r\n      quality,\r\n      rotation,\r\n      responseUriFunc,\r\n      outputType\r\n    );\r\n  }\r\n};\r\n","import React from \"react\";\r\nimport Resizer from \"../util/resizer\";\r\nimport axios from \"axios\";\r\n\r\nconst APIUrl = \"https://baroque-saucisson-79648.herokuapp.com/prediction\";\r\n\r\nclass ImageUploader extends React.Component {\r\n  constructor(props) {\r\n    super(props);\r\n    this.state = {\r\n      file: null,\r\n      isLoading: false,\r\n      result: null,\r\n      errorOccurred: false,\r\n      errorMessage: null\r\n    };\r\n    this.onFormSubmit = this.onFormSubmit.bind(this);\r\n    this.onChange = this.onChange.bind(this);\r\n  }\r\n\r\n  //called when the evaluate button is clicked\r\n  onFormSubmit(e) {\r\n    e.preventDefault();\r\n    const formData = new FormData();\r\n    formData.append(\"myImage\", this.state.file);\r\n    this.setState({ isLoading: true, file: null });\r\n\r\n    axios({\r\n      method: \"post\",\r\n      url: APIUrl,\r\n      timeout: 1000 * 30,\r\n      headers: {\r\n        \"Content-Type\": \"image/jpeg\"\r\n      },\r\n      data: this.state.file\r\n    })\r\n      .then(response => {\r\n        this.setState({ result: response.data });\r\n        this.setState({ isLoading: false });\r\n      })\r\n      .catch(error => {\r\n        if (error.code === \"ECONNABORTED\") {\r\n          this.setState({ errorOccurred: true, errorMessage: \"API timed out. Please try again.\", isLoading: false });\r\n        } else {\r\n          console.log(\"API call failed.\", error);\r\n          this.setState({ errorOccurred: true, errorMessage: \"API call failed. Please try again.\", isLoading: false });\r\n        }\r\n      });\r\n  }\r\n\r\n  //called when selecting an image\r\n  onChange(e) {\r\n    this.setState({ result: null, file: null, errorOccurred: false, errorMessage: null });\r\n\r\n    Resizer.imageFileResizer(\r\n      e.target.files[0],\r\n      1000,\r\n      1000,\r\n      \"JPEG\",\r\n      60,\r\n      0,\r\n      uri => {\r\n        if (uri === \"error\") {\r\n          this.setState({\r\n            file: null,\r\n            errorOccurred: true,\r\n            errorMessage: \"Error reading file. Please make sure the file is an image.\"\r\n          });\r\n        } else if (uri === \"File Not Found\") {\r\n          this.setState({ file: null });\r\n        } else {\r\n          const strImage = uri.replace(/^data:image\\/[a-z]+;base64,/, \"\");\r\n          this.setState({ file: strImage });\r\n        }\r\n      },\r\n      \"base64\"\r\n    );\r\n    e.target.value = null;\r\n  }\r\n\r\n  render() {\r\n    const spinner = (\r\n      <div className=\"spinner-border\" role=\"status\">\r\n        <span className=\"sr-only\">Loading...</span>\r\n      </div>\r\n    );\r\n\r\n    const selectedImage = this.state.file ? (\r\n      <React.Fragment>\r\n        <h5 className=\"text-center\">Selected Image</h5>\r\n        <img src={\"data:image/jpg;base64,\" + this.state.file} alt=\"failed to load\" className=\"img-fluid\" />\r\n      </React.Fragment>\r\n    ) : null;\r\n\r\n    const result = this.state.result ? (\r\n      <React.Fragment>\r\n        <h5 className=\"text-center\">Result</h5>\r\n        <img src={\"data:image/jpg;base64,\" + this.state.result} alt=\"failed to load\" className=\"img-fluid\" />\r\n      </React.Fragment>\r\n    ) : null;\r\n\r\n    const errorMessage = <h6>{this.state.errorMessage}</h6>;\r\n\r\n    const showSpinnerOrResults = this.state.isLoading ? spinner : result;\r\n\r\n    return (\r\n      <div className=\"container-fluid my-5 text-center\">\r\n        <form onSubmit={this.onFormSubmit}>\r\n          <div className=\"input-group\">\r\n            <div className=\"custom-file\">\r\n              <input\r\n                title={this.state.file ? \"Change file\" : \"Select file\"}\r\n                type=\"file\"\r\n                className=\"custom-file-input\"\r\n                id=\"inputGroupFile04\"\r\n                name=\"myImage\"\r\n                onChange={this.onChange}\r\n                disabled={this.state.isLoading}\r\n              />\r\n              <label className=\"custom-file-label text-left\" htmlFor=\"inputGroupFile04\">\r\n                {this.state.file ? \"Click evaluate\" : \"Select image\"}\r\n              </label>\r\n            </div>\r\n            <div className=\"input-group-append\">\r\n              <button className=\"btn btn-outline-secondary\" type=\"submit\" disabled={!this.state.file}>\r\n                Evaluate\r\n              </button>\r\n            </div>\r\n          </div>\r\n        </form>\r\n        <div className=\"container-fluid my-5\">\r\n          {this.state.errorOccurred && this.state.errorMessage ? errorMessage : null}\r\n          {selectedImage}\r\n          {showSpinnerOrResults}\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\nexport default ImageUploader;\r\n","import React from \"react\";\r\n\r\nexport default function Explanation() {\r\n  return (\r\n    <div className=\"container-fluid my-4\">\r\n      <p>\r\n        When the evaluate button is pressed, the site makes a call to a RESTful API. The API uses the{\" \"}\r\n        <a\r\n          href=\"https://docs.opencv.org/3.4.1/d7/d8b/tutorial_py_face_detection.html\"\r\n          target=\"_blank\"\r\n          rel=\"noopener noreferrer\"\r\n        >\r\n          OpenCV Haar Feature-based Cascade Classifier\r\n        </a>{\" \"}\r\n        to detect if a face is present in the uploaded image. Any detected faces are then classified for gender using\r\n        the CNN.\r\n      </p>\r\n      <p>\r\n        In the event that the Haar Cascade Classifier fails to detect any faces, the uploaded image will be returned\r\n        unchanged.\r\n      </p>\r\n    </div>\r\n  );\r\n}\r\n","import React from \"react\";\r\n\r\nimport NavBar from \"./components/NavBar\";\r\nimport Info from \"./components/Info\";\r\nimport ImageUploader from \"./components/ImageUploader\";\r\nimport Explanation from \"./components/Explanation\";\r\n\r\nfunction App() {\r\n  return (\r\n    <React.Fragment>\r\n      <NavBar />\r\n      <div className=\"container\">\r\n        <Info />\r\n        <ImageUploader />\r\n        <Explanation />\r\n      </div>\r\n    </React.Fragment>\r\n  );\r\n}\r\n\r\nexport default App;\r\n","import React from \"react\";\r\nimport ReactDOM from \"react-dom\";\r\nimport \"./index.css\";\r\nimport App from \"./App\";\r\n\r\nimport \"bootstrap\";\r\nimport \"bootstrap/dist/css/bootstrap.css\";\r\nimport \"bootstrap/dist/js/bootstrap.js\";\r\n\r\nReactDOM.render(<App />, document.getElementById(\"root\"));\r\n"],"sourceRoot":""}